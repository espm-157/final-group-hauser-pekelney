---
title: "fire.Rmd"
author: "Rachel Pekelney & Joshua Hauser"
date: "11/28/2021"
output: html_document
---

```{r options, include= FALSE, warning = FALSE}
library(tmap)      #interactive maps, raster + vector layers
library(terra)       # Successor to the raster library
library(tidyverse)   # our old friend
library(sf)   # to work with simple features (vector) data
library(rosm) # to work with OSM data
library(prettymapr)
library(yaps)
library(rgdal)
```  

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Fire perimeters in the ICB
https://frap.fire.ca.gov/frap-projects/fire-perimeters/

```{r, results='hide}
dir.create("../data/fireperimeters")
download.file("https://frap.fire.ca.gov/media/50dgwqrb/fire20_1.zip", "../data/fireperimeters/fire20_1.zip")
unzip("../data/fireperimeters/fire20_1.zip", 
      exdir = "../data/fireperimeters/fireperimeters")
```

```{r}
#can filter by NPS and YNP easily I think. I think to get the ICB fires though we should just manually select them out of the table from "FIRE_NAME"
fireperimeters = st_read("../data/fireperimeters/fireperimeters/fire20_1.gdb")
```

```{r}
icb_fires = as.tibble(fireperimeters) %>%
  filter(UNIT_ID == "YNP") %>%
  filter(YEAR_ > 1971) %>%
  arrange(YEAR_)
icb_fires
```



```{r}
dir.create("../data/YosemiteVeg")
download.file("https://irma.nps.gov/DataStore/DownloadFile/599215", "../data/YosemiteVeg/599215")

unzip("../data/YosemiteVeg/599215", 
      exdir = "../data/YosemiteVeg/")
```

```{r}
# SomethinginYos = rast('../data/YosemiteVeg/yosegeodata/YOSE_VegPolys.lyr')
tm_shape("../data/YosemiteVeg/yosegeodata/YOSE_VegPolys.lyr") + tm_polygons()
```

```{r}
rast("LC08_L1TP_043034_20210618_20210628_02_T1_refl.tif")


raster <- rast('m_3711920_se_11_060_20200804.jp2')

gdal_translate("m_3711920_se_11_060_20200804.jp2", "m_3711920_se_11_060_20200804.tif")
band1 <- readGDAL("m_3711920_se_11_060_20200804.tif")
```

